#!/usr/bin/env ruby
# Encoding: utf-8


$stdout.sync = true
$stderr.sync = true
$LOAD_PATH.unshift File.expand_path('../../lib', __FILE__)

require 'java_buildpack/buildpack'

build_dir = ARGV[0]

components = JavaBuildpack::Buildpack.drive_buildpack_with_logger(build_dir, 'Detect failed with exception %s') { |buildpack| buildpack.detect }.compact

if components.empty?
  abort
else
  puts components.join(', ')
end